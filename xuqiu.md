# 文言文学习小程序产品需求文档 (MVP版本)

## 一、产品概述

### 1.1 产品定位
"AI学文言文"是一款专为中小学生设计的文言文学习小程序，通过AI技术，帮助学生更轻松地理解文言文，提高古文阅读能力和考试成绩。

### 1.2 目标用户
- 主要用户：小学高年级（4-6年级）、初中（7-9年级）、高中（10-12年级）学生

### 1.3 核心价值
- 降低文言文学习门槛，提供清晰易懂的解析
- 利用AI技术提供个性化学习指导和答疑
- 帮助学生理解文言文基础知识点，提高考试成绩

## 二、MVP核心功能模块

### 2.1 首页

#### 2.1.1 欢迎区域
- **功能描述**：根据时间段显示不同欢迎语，增强亲和力
- **内容示例**：
  - 早上(5:00-11:59)："早上好，[用户昵称]！新的一天，一起品读经典吧"
  - 中午(12:00-13:59)："中午好，[用户昵称]！午休时间，来读一段文言文吧"
  - 下午(14:00-17:59)："下午好，[用户昵称]！来继续你的文言文学习之旅吧"
  - 晚上(18:00-23:59)："晚上好，[用户昵称]！今天学习文言文了吗？"
  - 凌晨(0:00-4:59)："夜深了，[用户昵称]！文言文学习不要熬夜哦"
- **展示方式**：顶部横幅，显示欢迎语和用户头像

#### 2.1.2 继续学习区域
- **功能描述**：显示用户最近学习的内容，方便快速进入
- **展示内容**：
  - 最近学习的1篇文章（标题、学习进度百分比）
  - 上次离开的具体位置（如第几句解析）
  - 学习时间记录
- **操作方式**：点击直接跳转到上次学习位置

#### 2.1.3 课文精讲区域
- **功能描述**：学习课文的主要入口，点击后进入课文选择页

#### 2.1.4 虚词实词背诵区域
- **功能描述**：分类整理常见文言实词、虚词，提供记忆练习
- **学习内容**：
  - 常见文言实词（按年级分类）
  - 常见文言虚词（按年级分类）
- **学习方式**：
  - 闪卡记忆
  - 例句情境学习
  - 小测验巩固
- **进度跟踪**：
  - 已背/未背词汇数量统计
  - 记忆强度指示（遗忘曲线算法）
  - 推荐复习提醒
- **展示形式**：进度条形式展示学习状态

#### 2.1.5 名句赏析区域
- **功能描述**：精选文言文经典名句进行解析赏析
- **内容组成**：
  - 名句原文
  - 断句标注
  - 翻译解析
  - 文化背景
  - 写作手法分析
  - 应用场景举例
- **互动形式**：
  - 将名句和解析展示为卡片，点击后进入详解页面。
  - 收藏功能
  - 换一换
  - 分享功能
- **展示方式**：
  - 卡片

#### 2.1.6 推广领取区域
- **功能描述**：推广小程序，提供学习资料领取
- **内容元素**：
  - 推广区域，点击后跳转公众号文章（在公众号文章内介绍权益几领取方式）

#### 2.1.1 课文选择页
- **功能描述**：分为两级选择：先选年级，再选课文。选择某一篇课文后进入课文学习页面
- **年级分类**：
  - 小学：趣味启蒙，感受古诗词魅力
  - 初中：系统学习，提升文言文理解
  - 高中：深度鉴赏，拓展文化视野
  - 课外：经典名篇，丰富文学素养
- **排序方式**：
  - 按课文id大小排序
- **展示形式**：卡片式布局
#### 2.1.2 课文学习页

##### 2.2.2.1 课文展示
- **功能描述**：展示文言文原文及翻译
- **内容属性**：
  - 课文标题
  - 作者信息
  - 朝代
  - 课文内容
  - 所属年级分类（小学、初中、高中、课外）

- **基础功能**：
  - 学习状态标记（未开始/学习中/已完成）
  - 收藏状态（已收藏/未收藏）

##### 2.2.2.2 解析功能
##### 2.2.2.2.1 全文翻译
- **功能描述**：提供整篇文章的现代汉语翻译
- **翻译内容**：
  - AI生成全文翻译
- **展示方式**：
  - 可与原文并排显示
  - 可显示/隐藏


##### 2.2.2.2.2 逐句解析
- **功能描述**：提供文章逐句详细讲解
- **解析内容**：
  - 句子原文（带注音标注）
  - 断句标注
  - 句子翻译
  - 关键词解释（古今异义词、通假字等标注）
  - 语法结构分析
  - 修辞手法点评
- **交互功能**：
  - 上一句/下一句导航
  - 点击单个字/词显示详解

##### 2.2.2.2.3 背景知识
- **功能描述**：提供文章创作背景及相关知识
- **内容构成**：
  - 作者生平简介
  - 创作背景介绍
  - 历史时代背景
  - 文章主旨思想

##### 2.2.2.2.4 练习巩固
- **功能描述**：通过调用AI大模型基于当前课文生成针对性练习题
- **题型设置**：
  - 文言文断句题
  - 虚词用法辨析
  - 实词含义选择
  - 句子翻译题
  - 内容理解题
  - 文言现象识别题
- **出题规则**
  - 从以上类型中随机出5道题目

##### 2.2.2.2.5 提问拓展
- **功能描述**：用户可针对课文提出任何问题获取解答
- **问答方式**：
  - 自由提问输入
- **回答特点**：
  - AI智能解答
  - 多角度分析
  - 举一反三拓展
- **互动设计**：
  - 问题推荐
  - 问答历史记录

### 2.2 练习页

#### 2.2.1 每日答题
- **功能描述**：提供每日文言文练习题，培养学习习惯
- **内容设置**：
  - 每日5-10道题目
  - 题型多样（选择、填空、翻译等）
  - 针对用户当前所选年级，调用AI大模型出题。
- **功能特点**：
  - 打卡记录
  - 错题解析
  - 正确率统计

#### 2.2.2 专项突破
- **功能描述**：针对文言文不同知识点的专项训练
- **专项类别**：
  - 实词辨析训练
  - 虚词用法训练
  - 句式结构训练
  - 翻译技巧训练
  - 文言现象识别训练
  - 古今异义词训练
- **练习模式**：
  - 基础巩固模式
  - 强化提升模式
  - 考点突破模式
- **功能特点**：
  - 专项知识点讲解
  - 梯度难度设置
  - 针对性练习推荐
  - 弱项分析与推荐


### 2.3 AI助手页
- **功能描述**：提供拟人化AI助手，调用AI大模型回答用户提出的文言文相关问题
- **角色设定**：
  - 虚拟形象：李白
  - 语言风格：文学气息浓厚但通俗易懂
  - 知识范围：文言文、古代文化、写作技巧等
- **交互方式**：
  - AI聊天界面，文字对话
- **功能特色**：
  - 知识问答
  - 作业辅导
  - 古诗创作
  - 文学典故讲解
  - 文言文翻译
  - 学习方法指导

### 2.4 我的页面

#### 2.5.1 VIP会员
- **功能描述**：会员权益与购买管理
- **会员权益**：
  - 所有功能开放使用
- **会员类型**：
  - 月度会员
  - 季度会员
  - 年度会员
  - 终身会员

#### 2.5.2 学习统计
- **功能描述**：展示用户学习数据统计
- **统计内容**：
  - 累计学习时长
  - 已学篇目数量
  - 掌握字词数量
  - 答题正确率

#### 2.5.3 我的错题集
- **功能描述**：收集整理用户做错的题目
- **功能设计**：
  - 定期复习提醒
- **使用方式**：
  - 错题重做

#### 2.5.4 我的收藏
- **功能描述**：用户收藏的内容管理
- **收藏内容**：
  - 文章收藏
  - 名句收藏
  - 虚实词收藏

## 三、小程序数据库设计（微信云开发版）

## 3.1、用户相关集合

### 1. users（用户基本信息）
```javascript
{
  _id: "用户ID",
  openid: "微信openid",
  nickname: "用户昵称",
  avatar_url: "头像地址",
  grade_level: "年级段", // 小学/初中/高中
  register_time: "注册时间",
  last_login_time: "最后登录时间",
  is_vip: "是否是会员", // boolean
  vip_expire_time: "会员到期时间" // 非会员为null
}
```

### 2. user_study_records（用户学习数据）
```javascript
{
  _id: "记录ID",
  user_id: "关联用户ID",
  total_study_time: "累计学习时长(分钟)",
  total_articles_count: "已学习文章数",
  total_words_mastered: "已掌握字词数",
  correct_rate: "答题正确率",
  last_study_time: "最后学习时间",
  study_days: "连续学习天数",
  last_study_position: {
    article_id: "最近学习的文章ID",
    section_type: "最近学习的位置类型", // 原文/翻译/逐句解析/练习
    section_index: "最近学习的位置索引" // 第几句或第几题
  }
}
```

### 3. user_learning_progress（用户学习进度）
```javascript
{
  _id: "记录ID",
  user_id: "关联用户ID",
  article_id: "文章ID",
  progress: "学习进度百分比",
  is_completed: "是否完成", // boolean
  last_position: {
    section_type: "位置类型", // 原文/翻译/逐句解析/练习
    section_index: "位置索引" // 第几句或第几题
  },
  study_duration: "学习时长(分钟)",
  last_time: "最后学习时间",
  created_at: "创建时间"
}
```

### 4. user_collections（用户收藏内容）
```javascript
{
  _id: "收藏ID",
  user_id: "关联用户ID",
  collection_type: "收藏类型", // 文章/名句/虚实词
  item_id: "收藏项目ID",
  collect_time: "收藏时间"
}
```

### 5. user_exercise_records（用户练习记录）
```javascript
{
  _id: "记录ID",
  user_id: "关联用户ID",
  exercise_id: "练习题ID",
  is_correct: "是否正确答题", // boolean
  user_answer: "用户回答",
  practice_time: "练习时间",
  exercise_type: "练习类型", // 每日练习/课文练习/专项练习
  article_id: "关联文章ID" // 如果是课文练习
}
```

### 6. user_wrong_exercises（用户错题集）
```javascript
{
  _id: "记录ID",
  user_id: "关联用户ID",
  exercise_id: "练习题ID",
  wrong_times: "错误次数",
  last_practice_time: "最后练习时间",
  is_mastered: "是否已掌握" // boolean
}
```

## 3.2、内容相关集合

### 1. articles（文言文课文）
```javascript
{
  _id: "课文ID",
  title: "标题",
  author: "作者",
  dynasty: "朝代",
  grade_level: "适用年级段", // 小学/初中/高中/课外
  content: "原文内容",
  translation: "全文翻译",
  is_processed: "AI内容是否已生成", // boolean
  author_intro: "作者简介",
  creation_background: "创作背景",
  historical_background: "历史背景",
  main_idea: "文章主旨",
  publish_status: "发布状态", // 已发布/未发布
  display_order: "显示顺序",
  created_at: "创建时间",
  updated_at: "更新时间"
}
```

### 2. article_sentences（课文分句）
```javascript
{
  _id: "句子ID",
  article_id: "关联文章ID",
  sentence_index: "句子索引", // 第几句
  original_text: "原句内容",
  phonetic_notation: "注音标注", // 拼音/注音
  punctuated_text: "断句标注",
  translation: "句子翻译",
  sentence_structure: "语法结构分析",
  rhetorical_analysis: "修辞手法分析"
}
```

### 3. article_words（课文重点字词）
```javascript
{
  _id: "字词ID",
  article_id: "关联文章ID",
  sentence_id: "关联句子ID",
  word: "字词",
  explanation: "解释",
  word_type: "类型", // 实词/虚词/古今异义词/通假字
  example_sentences: ["例句1", "例句2"],
  position: "在原文中的位置" // 第几句第几个字
}
```

### 4. common_words（常见文言实虚词）
```javascript
{
  _id: "字词ID",
  word: "字词",
  word_type: "类型", // 实词/虚词
  grade_level: "适用年级", // 小学/初中/高中
  pinyin: "拼音",
  explanations: [
    {
      meaning: "含义",
      example: "例句"
    }
  ],
  difficulty: "难度等级", // 1-5
  usage_frequency: "使用频率" // 高/中/低
}
```

### 5. famous_quotes（名句赏析）
```javascript
{
  _id: "名句ID",
  content: "名句内容",
  source: "出处",
  author: "作者",
  dynasty: "朝代",
  translation: "翻译",
  punctuated_text: "断句标注",
  cultural_background: "文化背景",
  writing_technique: "写作手法",
  application_scenarios: "应用场景",
  grade_level: "适用年级", // 小学/初中/高中
  display_order: "显示顺序"
}
```

### 6. exercises（练习题库）
```javascript
{
  _id: "练习题ID",
  question: "题目内容",
  options: ["选项A", "选项B", "选项C", "选项D"], // 选择题选项
  answer: "正确答案",
  analysis: "解析",
  type: "题型", // 单选/多选/填空/翻译
  subtype: "子类型", // 断句/虚词/实词/翻译/理解/文言现象
  difficulty: "难度", // 1-5
  grade_level: "适用年级", // 小学/初中/高中
  article_id: "关联文章ID", // 如果是特定课文题目
  knowledge_point: "知识点" // 对应的知识点标签
}
```

### 7. daily_exercises（每日练习）
```javascript
{
  _id: "每日练习ID",
  date: "日期", // YYYY-MM-DD
  grade_level: "年级段", // 小学/初中/高中
  exercise_ids: ["练习题ID1", "练习题ID2", "练习题ID3"], // 关联练习题
  created_at: "创建时间"
}
```

### 8. specialized_exercises（专项练习）
```javascript
{
  _id: "专项练习ID",
  title: "专项名称",
  description: "描述",
  category: "专项类别", // 实词/虚词/句式/翻译/文言现象/古今异义词
  level: "练习模式", // 基础/强化/考点
  exercise_ids: ["练习题ID1", "练习题ID2"], // 关联练习题
  knowledge_intro: "知识点讲解",
  grade_level: "适用年级", // 小学/初中/高中
  display_order: "显示顺序"
}
```

## 3.3、AI助手相关集合

### 1. ai_chat_records（AI对话记录）
```javascript
{
  _id: "对话记录ID",
  user_id: "关联用户ID",
  session_id: "会话ID", // 同一次对话的多条消息共用session_id
  messages: [
    {
      role: "发送者角色", // user/assistant
      content: "消息内容",
      timestamp: "时间戳"
    }
  ],
  article_id: "关联文章ID", // 如果是基于特定文章的提问
  created_at: "创建时间",
  updated_at: "更新时间"
}
```

### 2. ai_prompt_templates（AI提示模板）
```javascript
{
  _id: "模板ID",
  prompt_type: "提示类型", // 翻译/解析/出题/回答
  template: "提示模板",
  parameters: ["参数1", "参数2"], // 模板中的参数
  created_at: "创建时间",
  updated_at: "更新时间"
}
```

## 3.4、会员相关集合

### 1. vip_plans（会员计划）
```javascript
{
  _id: "计划ID",
  name: "会员名称", // 月度/季度/年度/终身
  price: "价格(元)",
  duration: "时长(天)", // 终身会员可设为-1
  description: "描述",
  benefits: ["权益1", "权益2"],
  status: "状态", // 启用/停用
  display_order: "显示顺序"
}
```

### 2. user_vip_records（用户会员记录）
```javascript
{
  _id: "记录ID",
  user_id: "关联用户ID",
  plan_id: "会员计划ID",
  start_time: "开始时间",
  end_time: "结束时间",
  status: "状态", // 有效/过期
  payment_id: "支付记录ID",
  created_at: "创建时间"
}
```

## 3.5、系统配置集合

### 1. app_configs（应用配置）
```javascript
{
  _id: "配置ID",
  config_key: "配置键",
  config_value: "配置值",
  description: "描述",
  updated_at: "更新时间"
}
```

### 2. grade_configs（年级配置）
```javascript
{
  _id: "配置ID",
  grade_key: "年级键", // primary/junior/senior/extra
  grade_name: "年级名称", // 小学/初中/高中/课外
  description: "描述",
  display_order: "显示顺序"
}
```


## 四、技术实现要点

### 4.1 前端实现
- 微信小程序原生框架
- 简洁UI设计，核心功能优先
- 基础的本地存储（学习进度、设置选项）

### 4.2 后端技术
- 微信云开发平台
  - 云数据库：存储用户数据和课文内容
  - 云函数：处理AI请求
- AI内容生成策略
  - 首次访问文章时生成AI内容并永久存储
  - 非实时生成，减少API调用成本

### 4.3 用户体验重点
- 加载速度优先（首屏加载<3秒）
- 简洁清晰的信息展示
- 核心学习流程顺畅（无复杂操作）


# 五、开发计划

## 5.1 开发概述与策略

### 5.1.1 开发阶段划分
- **阶段一**：环境搭建与基础设施（1周）
- **阶段二**：核心功能实现（4周）
- **阶段三**：功能完善与优化（2周）
- **阶段四**：测试与上线准备（1周）

### 5.1.2 开发原则
- 模块化开发，分而治之
- 先实现核心流程，后添加辅助功能
- 持续集成，每个模块完成即测试
- 优先保证用户体验和性能

## 5.2 详细开发计划

### 5.2.1 环境搭建与基础架构（第1周）
- **任务1.1**：微信开发者工具安装与项目初始化（1天）
  - 创建小程序项目
  - 配置AppID与基本信息
  - 初始化云开发环境

- **任务1.2**：数据库设计与初始化（2天）
  - 创建数据库集合
  - 设计索引结构
  - 编写数据库操作的基础函数

- **任务1.3**：基础架构搭建（2天）
  - 配置全局样式
  - 设计页面路由
  - 封装网络请求和云函数调用
  - 构建用户认证系统

- **任务1.4**：AI服务接口配置（2天）
  - 对接大语言模型API
  - 设计提示词模板
  - 测试API响应与性能

### 5.2.2 内容模块开发（第3-4周）
- **任务2.1**：首页界面开发（3天）
  - 欢迎区域实现
  - 继续学习功能
  - 课文精讲入口
  - 实词虚词区域
  - 名句赏析区域

- **任务2.2**：课文选择页开发（2天）
  - 年级分类实现
  - 课文列表展示
  - 学习进度标记

- **任务2.3**：课文学习页开发（5天）
  - 课文展示功能
  - 全文翻译实现
  - 逐句解析功能
  - 背景知识模块

- **任务2.4**：实词虚词背诵模块（3天）
  - 闪卡记忆功能
  - 例句情境学习
  - 进度跟踪实现

- **任务2.5**：名句赏析模块（2天）
  - 名句展示
  - 文化背景与解析
  - 收藏功能

### 5.2.3 练习与AI模块开发（第5周）
- **任务3.1**：练习页面开发（3天）
  - 每日答题模块
  - 专项突破模块
  - 错题集实现

- **任务3.2**：练习题与答案生成（2天）
  - AI题目生成接口
  - 答案核对逻辑
  - 成绩统计功能

- **任务3.3**：AI助手实现（2天）
  - 聊天界面开发
  - 提问应答功能
  - AI人设配置

### 5.2.4 用户模块开发（第2周）
- **任务4.1**：用户注册与登录（2天）
  - 用户信息收集与存储
  - 用户状态管理

- **任务4.2**："我的"页面开发（3天）
  - 个人信息展示
  - 学习统计功能
  - 会员状态显示

- **任务4.3**：VIP会员系统（2天）
  - 会员权益设计
  - 支付功能集成
  - 会员状态管理

### 5.2.5 功能完善与优化（第6-7周）
- **任务5.1**：数据统计与分析（2天）
  - 学习时长记录
  - 学习进度统计
  - 用户行为分析

- **任务5.2**：用户收藏系统（2天）
  - 收藏功能完善
  - 收藏内容管理
  - 快速访问实现

- **任务5.3**：性能优化（3天）
  - 页面加载速度优化
  - 数据缓存策略实现
  - 资源懒加载

- **任务5.4**：UI/UX优化（3天）
  - 页面过渡效果
  - 交互反馈完善
  - 主题样式调整